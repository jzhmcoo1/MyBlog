<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>
        {% block title %}{% endblock %} - MyBlog
    </title>
    <link rel="stylesheet" href="{{ url_for('static', filename='blog.css') }}">
    {% block head %}
    {% endblock %}
    {% block somestyles %}
    {% endblock %}
</head>
<body>
<div id="header">
    <div class="header-container">
        <div class="header-nav">
            <div class="header-logo">
                <a href="/" class="float-left">
                    MyBlog
                </a>
            </div>
            <div class="nav float-right">
                <a href="/">所有文章</a>
                {% if g.user %}
                    <a href="{{ url_for('auth.info', id=g.user['id']) }}">{{ g.user['username'] }}</a>
                    <a href="{{ url_for('auth.logout') }}">注销</a>
                {% else %}
                    <a href="{{ url_for('auth.register') }}">注册</a>
                    <a href="{{ url_for('auth.login') }}">登录</a>
                {% endif %}
            </div>
        </div>

        <div class="header-wrapper">
            <div class="header-content">
                <h1 class="header-title">
                    {% block header_title %}
                    {% endblock %}
                </h1>
                {% block data %}{% endblock %}
                <div class="underline"></div>
                <p class="header-subtitle">
                    {% block header_subtitle %}
                    {% endblock %}
                </p>
            </div>
        </div>
    </div>
</div>

<div id="main">
    <div class="main-container">
        {% block content %}
        {% endblock %}
    </div>
</div>


<div id="footer">
    <div class="footer-container">
        <p> ©2020 MyBlog - 基于 flask 框架的 博客</p>
        <p>本站已经运行了: <span id="js-running"></span></p>
    </div>
</div>

{% block scripts %}
{% endblock %}

<script>
    var startTime = "2020-05-15";
    var calculationTime = function (startTime) {
        var s1 = new Date(startTime.replace(/-/g, "/")), s2 = new Date(),
            runTime = parseInt((s2.getTime() - s1.getTime()) / 1000);
        var year = Math.floor(runTime / 86400 / 365);
        runTime = runTime % (86400 * 365);
        var month = Math.floor(runTime / 86400 / 30);
        runTime = runTime % (86400 * 30);
        var day = Math.floor(runTime / 86400);
        runTime = runTime % 86400;
        var hour = Math.floor(runTime / 3600);
        runTime = runTime % 3600;
        var minute = Math.floor(runTime / 60);
        runTime = runTime % 60;
        var second = runTime;
        document.querySelector(".runningTime > .year").innerText = year;
        document.querySelector(".runningTime > .month").innerText = month;
        document.querySelector(".runningTime > .day").innerText = day;
        document.querySelector(".runningTime > .hour").innerText = hour;
        document.querySelector(".runningTime > .minute").innerText = minute;
        document.querySelector(".runningTime > .second").innerText = second
    };
    setInterval("calculationTime(startTime)", 1000);
    var node = document.createElement("span");
    node.innerHTML = '该站点运行了 <label class="year">0</label> 年 <label class="month">0</label> 月 <label class="day">0</label> 日 <label class="hour">0</label> 时 <label class="minute">0</label> 分 <label class="second">0</label> 秒';
    node.className = "runningTime";
    document.getElementById("js-running").appendChild(node);
</script>
</body>
</html>